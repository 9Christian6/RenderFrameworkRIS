<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arty: Arty</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arty
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Arty </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Arty is an educational rendering framework. It contains all the basic infrastructure to render from simple to complex scenes, and will be used throughout the <em>Realistic <a class="el" href="structImage.html">Image</a> Synthesis</em> course.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Disclaimers</h1>
<p>Please do not distribute or share the source code of this program. If you want to use a version control software, please do so privately. Sharing source code publicly will be considered cheating.</p>
<p>The test scenes are provided with authorization from their respective authors. If you want to redistribute the scenes, make sure to follow their licenses, if any.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Building</h1>
<p>If you are not an expert in C++, you can try the <code>run.sh</code> (Linux / macOS), <code>run-nosdl.sh</code> (no SDL GUI) and <code>run.bat</code> (Windows) scripts. Provided you have a C++ compiler, git, and <a href="https://cmake.org/">CMake</a> installed, these will automatically download and compile all dependencies (via <a href="https://github.com/microsoft/vcpkg">vcpkg</a>), configure and compile a release build, and run arty with the given parameters.</p>
<p>For example, on Unix systems: </p><div class="fragment"><div class="line">./run.sh test/cornell_box/cornell_box.yml -s 8</div>
</div><!-- fragment --><p>And on Windows: </p><div class="fragment"><div class="line">run.bat test/cornell_box/cornell_box.yml -s 8</div>
</div><!-- fragment --><p>If the script fails you can (a) try and fix it based on the error messages (likely some missing build tool like CMake) or (b) follow the more involved instructions below.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Linux</h2>
<p>The dependencies are:</p>
<ul>
<li><a href="https://cmake.org/download/">CMake</a></li>
<li><a href="https://www.libsdl.org/download-2.0.php">SDL2</a></li>
<li><a href="http://www.libpng.org/pub/png/libpng.html">libpng</a></li>
<li><a href="https://libjpeg-turbo.org/">libjpeg</a></li>
<li><a href="/http://www.libtiff.org/">libtiff</a></li>
<li><a href="https://github.com/jbeder/yaml-cpp">yaml-cpp</a></li>
</ul>
<p>All of these should be available from your package manager. After installing them, run the following to create a build folder and compile in Release mode:</p>
<div class="fragment"><div class="line">cmake -B build -S . -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build build</div>
</div><!-- fragment --><p>It also does not hurt to create a Debug build in a separate folder (to reduce recompile times): </p><div class="fragment"><div class="line">cmake -B build-debug -S . -DCMAKE_BUILD_TYPE=Debug</div>
<div class="line">cmake --build build-debug</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Windows</h2>
<p>Builing arty with Visual Studio requires at least Visual Studio 2019 version 16.8!</p>
<p>On Windows, we recommend using <a href="https://github.com/microsoft/vcpkg">vcpkg</a> to download and compile all dependencies. Run the following in the folder that contains <code>arty</code>:</p>
<div class="fragment"><div class="line">git clone https://github.com/microsoft/vcpkg</div>
<div class="line">cd vcpkg</div>
<div class="line">.\bootstrap-vcpkg.bat</div>
<div class="line">.\vcpkg install sdl2 libpng libjpeg-turbo tiff yaml-cpp embree3 --triplet x64-windows</div>
</div><!-- fragment --><p>Note that, for a Windows build, using Embree is mandatory. To create a build folder and build in Release mode, do the following:</p>
<div class="fragment"><div class="line">cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake -DUSE_EMBREE</div>
<div class="line">cmake --build build --config Release</div>
</div><!-- fragment --><p>The compiled executable will be in <code>build/src/Release/arty.exe</code> Replace the <code>../vcpkg</code> with the full path to <code>vcpkg</code> if it is not in the folder above.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Running</h1>
<p>Arty comes with a set of test scenes. They are present in the <code>test</code> directory. Each scene is described in a YAML file (<code>.yml</code> extension). To run Arty, use the following command: </p><pre class="fragment">arty &lt;path-to-scene&gt;.yml
</pre><p>To get the full list of options, type: </p><pre class="fragment">arty -h
</pre><p>By default, Arty runs the debug renderer (eye-light shading only). The camera position can be controlled using the keyboard arrows. The keypad <code>+</code>/<code>-</code> keys control the translation speed. The camera direction is controlled with the mouse. To enable camera control, keep the left mouse button pressed while moving the cursor. The <code>R</code> key cycles through the different rendering algorithms. The implementation of these algorithms is missing and will be your task.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Scene format</h1>
<p>The scene files are described in <a href="http://yaml.org/">YAML</a>. Here is an example of scene:</p>
<div class="fragment"><div class="line">---</div>
<div class="line"># List of OBJ files</div>
<div class="line">meshes: [&quot;model.obj&quot;]</div>
<div class="line"># Camera definition</div>
<div class="line">camera: !perspective_camera {</div>
<div class="line">    eye: [-0.45,  1.5, -1.0],      # Position of the camera</div>
<div class="line">    center: [-0.45, -10.0, -100],  # Point to look at</div>
<div class="line">    up: [0, 1, 0],                 # Up vector</div>
<div class="line">    fov: 60.0                      # Field of view, in degrees</div>
<div class="line">}</div>
<div class="line"># List of lights (optional, emissive materials in the OBJ file will be converted to area lights)</div>
<div class="line">lights: [</div>
<div class="line">    !point_light {</div>
<div class="line">        position: [0, 10, 0],</div>
<div class="line">        color: [100, 100, 0]</div>
<div class="line">    },</div>
<div class="line">    !triangle_light {</div>
<div class="line">        v0: [0, 1, 2],              # First vertex</div>
<div class="line">        v1: [0, 1, 3],              # Second vertex</div>
<div class="line">        v2: [1, 1, 2],              # Third vertex</div>
<div class="line">        color: [100, 0, 100]</div>
<div class="line">    }</div>
<div class="line">]</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Conventions</h1>
<p>The conventions in Arty are as follows:</p>
<ul>
<li>Functions to sample a direction should return <b>normalized</b> vectors</li>
<li>Rays generated from the camera should have a <b>normalized</b> direction</li>
<li>Materials and lights expect a <b>normalized</b> direction for sampling and evaluation</li>
<li><b>No redundant normalization should be done otherwise</b></li>
</ul>
<p>By enforcing those conventions, we ensure that the code is correct <em>and</em> fast. In debug mode, you can check whether this convention is actually followed using the <code>assert_normalized</code> macro in <code><a class="el" href="common_8h_source.html">common.h</a></code>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Documentation</h1>
<p>The source code is thoroughly documented, and <a href="http://www.doxygen.org/">Doxygen</a> can generate structured HTML pages from all the inline comments in the source files. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
